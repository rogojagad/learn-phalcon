<!DOCTYPE html>
<html>
    <head>
    <link href="<?= $this->url->get('css/style.css') ?>" rel="stylesheet">
    <script src="<?= $this->url->get('js/script.js') ?>"></script>
        <title>Index - My Webpage</title>
    </head>

    <body>
        <h1>My Todo List</h1>
        <?php if ($this->session->has('auth')) { ?>
            <p style="color: white">Hello, <?= $this->session->get('auth')['username'] ?></p>
            <a href="<?= $this->url->get('logout') ?>">Logout</a>
        <?php } else { ?>
            <a href="<?= $this->url->get('login') ?>">Login</a>
        <?php } ?>

        
    <div id="todo_input">
        <?= $this->tag->form(['todo/store', 'method:post']) ?>
            <label for='todo'>Add new item</label>
            <?= $this->tag->textField(['todo', 'size' => 32]) ?>

            <?= $this->tag->submitButton(['Add Item']) ?>
        <?= $this->tag->endForm() ?>
<!--
		<form action="todo/store" method="post">
            <label for='todo'>Add new item</label>
            <input type="text" id="todo">
            <input type="button" value="Add Item">
        </form>
	</div>
-->
	<div id="todo_panel">
		<?php if ($todosCount > 0) { ?>
			<ul id="todo_list">
			<?php foreach ($todos as $todo) { ?>
				<a href="todo/<?= $todo->id ?>" class="item" ><?= $todo->content ?></a>
				<p style="color: white"><?= $todo->users->name ?></p>
			<?php } ?>
			</ul>
		<?php } else { ?>
			<h2 style="color: white; text-align:center;">No Todo Item</h2>
		<?php } ?>
	</div>

    </body>
</html>